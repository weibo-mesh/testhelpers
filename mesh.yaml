#config fo agent
motan-agent:
  mport: 8082  
  log_dir: "stdout"
  snapshot_dir: "./snapshot"
  registry: "zk" # registry id
  application: "mesh-test-helper" #请求来源，用于在监控中标识请求的业务方，请各业务方务必修改成自己的标识，类似 APP_NAME

#config of registries
motan-registry:
  test-direct:
    protocol: direct
    host: 127.0.0.1
    port: 9100
  zk:
    protocol: zookeeper
    host: 127.0.0.1
    port: 2181
  cache_service-direct:
    protocol: direct
    host: 127.0.0.1
    port: 11211

#conf of basic refers
motan-basicRefer:
  test-mesh-basicRefer: # basic refer id
    group: motan-demo-rpc # group name
    protocol: motan2 # rpc protocol
    requestTimeout: 10000
    haStrategy: failover
    loadbalance: roundrobin
    serialization: simple
    filter: "accessLog" # filter registed in extFactory
    retries: 0
    connectRetryInterval: 5 # mostly you needn't set this option, it's just for testing(like a client mesh referring a server mesh)

#conf of refers
motan-refer:
  hello-mt-direct:
    path: com.weibo.HelloMTService
    registry: "zk" # registry id
    basicRefer: test-mesh-basicRefer
  hello-mesh-http-zk:
    path: com.weibo.HelloWorldService
    registry: "zk" # registry id
    basicRefer: test-mesh-basicRefer
  cache_service:
    path: cn.sina.api.commons.cache.MemcacheClient
    registry: cache_service-direct
    protocol: memcache
    group: motan-demo-rpc # group name
    protocol: memcache # rpc protocol
    requestTimeout: 10000
    haStrategy: failover
    loadbalance: roundrobin
    filter: "accessLog" # filter registed in extFactory
    retries: 0

motan-basicService:
  test-mesh-basicService: # basic refer id
    group: motan-demo-rpc # group name
    protocol: motan2 # rpc protocol
    registry: "zk" # registry id
    filter: "accessLog" # filter registed in extFactory
    serialization: simple
    nodeType: server

motan-service:
  mytest-motan2:
    path: com.weibo.HelloWorldService
    export: "motan2:9200"
    provider: http
    HTTP_REQUEST_METHOD: GET
    # URL_FORMAT: http://xxx.xxx.0.1/or
    basicService: test-mesh-basicService

http-service:
  mytest-motan2:
    anyFuncName,Hello:
      # URL_FORMAT: http://xxx.xxx.55.7/server.php
      URL_FORMAT: http://127.0.0.1:8080